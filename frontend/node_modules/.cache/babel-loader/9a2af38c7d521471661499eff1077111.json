{"ast":null,"code":"var _jsxFileName = \"/Users/scapista/code/hackathon/group-7-hackathon-backend/frontend/src/components/EditPermissionsModal.js\";\nimport React from \"react\";\nimport { css } from \"@emotion/core\";\nimport styled from \"@emotion/styled\";\nimport LGButton from \"@leafygreen-ui/button\";\nimport Modal from \"@leafygreen-ui/modal\";\nimport XIcon from \"@leafygreen-ui/icon/dist/X\";\nimport PlusIcon from \"@leafygreen-ui/icon/dist/Plus\";\nimport IconButton from \"@leafygreen-ui/icon-button\";\nimport TextInput from \"@leafygreen-ui/text-input\";\nimport { uiColors } from \"@leafygreen-ui/palette\";\nimport { useRealmApp } from \"../RealmApp\";\n\nfunction useTeamMembers() {\n  const [teamMembers, setTeamMembers] = React.useState(null);\n  const [newUserEmailError, setNewUserEmailError] = React.useState(null);\n  const app = useRealmApp();\n  const {\n    addTeamMember,\n    removeTeamMember,\n    getMyTeamMembers\n  } = app.currentUser.functions;\n\n  const updateTeamMembers = () => {\n    getMyTeamMembers().then(setTeamMembers);\n  }; // display team members on load\n\n\n  React.useEffect(updateTeamMembers, []);\n  return {\n    teamMembers,\n    errorMessage: newUserEmailError,\n    addTeamMember: async email => {\n      const {\n        error\n      } = await addTeamMember(email);\n\n      if (error) {\n        setNewUserEmailError(error);\n        return {\n          error\n        };\n      } else {\n        updateTeamMembers();\n      }\n    },\n    removeTeamMember: async email => {\n      await removeTeamMember(email);\n      updateTeamMembers();\n    }\n  };\n}\n\nexport default function EditPermissionsModal(_ref) {\n  let {\n    isEditingPermissions,\n    setIsEditingPermissions\n  } = _ref;\n  const {\n    teamMembers,\n    errorMessage,\n    addTeamMember,\n    removeTeamMember\n  } = useTeamMembers();\n  return /*#__PURE__*/React.createElement(Modal, {\n    open: isEditingPermissions,\n    setOpen: setIsEditingPermissions,\n    size: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ContentContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ModalHeading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }, \"Team Members\"), /*#__PURE__*/React.createElement(ModalText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }, \"These users can add, read, modify, and delete tasks in your project\"), /*#__PURE__*/React.createElement(ModalText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }, \"Add a new user by email:\"), /*#__PURE__*/React.createElement(AddTeamMemberInput, {\n    addTeamMember: addTeamMember,\n    errorMessage: errorMessage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(List, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, (teamMembers === null || teamMembers === void 0 ? void 0 : teamMembers.length) ? teamMembers.map(teamMember => {\n    return /*#__PURE__*/React.createElement(ListItem, {\n      key: teamMember._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(TeamMemberContainer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(TeamMemberName, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 21\n      }\n    }, teamMember.name), /*#__PURE__*/React.createElement(IconButton, {\n      \"aria-label\": \"remove-team-member-button\",\n      className: \"remove-team-member-button\",\n      onClick: async () => {\n        await removeTeamMember(teamMember.name);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(XIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 23\n      }\n    }))));\n  }) : /*#__PURE__*/React.createElement(ModalText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }\n  }, \"No team members\"))));\n}\n\nfunction AddTeamMemberInput(_ref2) {\n  let {\n    addTeamMember,\n    errorMessage\n  } = _ref2;\n  const [inputValue, setInputValue] = React.useState(\"\");\n  return /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(InputContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TextInput, {\n    type: \"email\",\n    \"aria-labelledby\": \"team member email address\",\n    placeholder: \"some.email@example.com\",\n    state: errorMessage ? \"error\" : \"none\",\n    errorMessage: errorMessage !== null && errorMessage !== void 0 ? errorMessage : \"Foo\",\n    onChange: e => {\n      setInputValue(e.target.value);\n    },\n    value: inputValue,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    disabled: !inputValue,\n    onClick: async () => {\n      const result = await addTeamMember(inputValue);\n\n      if (!(result === null || result === void 0 ? void 0 : result.error)) {\n        setInputValue(\"\");\n      }\n    },\n    styles: {\n      height: \"36px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(PlusIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 9\n    }\n  }), \"Add User\"));\n}\n\nconst Button = styled(LGButton)`\n  height: 36px;\n`;\nconst Row = styled.div`\n  display: flex;\n  align-items: end;\n`;\nconst InputContainer = styled.div`\n  flex-grow: 1;\n`;\nconst ModalHeading = styled.h2`\n  margin: 0;\n  font-size: 24px;\n`;\nconst ModalText = styled.p`\n  margin: 8px 2px;\n`;\nconst ContentContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\nconst List = styled.ul`\n  list-style: none;\n  padding: 8px 0;\n  margin: 0;\n`;\nconst ListItem = styled.li(() => css`\n    padding: 8px 12px;\n    border-radius: 8px;\n    :hover {\n      background: ${uiColors.gray.light2};\n    }\n  `);\nconst TeamMemberContainer = styled.div`\n  display: flex;\n  align-items: center;\n`;\nconst TeamMemberName = styled.div`\n  flex-grow: 1;\n  padding: 8px 0;\n`;","map":{"version":3,"names":["React","css","styled","LGButton","Modal","XIcon","PlusIcon","IconButton","TextInput","uiColors","useRealmApp","useTeamMembers","teamMembers","setTeamMembers","useState","newUserEmailError","setNewUserEmailError","app","addTeamMember","removeTeamMember","getMyTeamMembers","currentUser","functions","updateTeamMembers","then","useEffect","errorMessage","email","error","EditPermissionsModal","isEditingPermissions","setIsEditingPermissions","length","map","teamMember","_id","name","AddTeamMemberInput","inputValue","setInputValue","e","target","value","result","height","Button","Row","div","InputContainer","ModalHeading","h2","ModalText","p","ContentContainer","List","ul","ListItem","li","gray","light2","TeamMemberContainer","TeamMemberName"],"sources":["/Users/scapista/code/hackathon/group-7-hackathon-backend/frontend/src/components/EditPermissionsModal.js"],"sourcesContent":["import React from \"react\";\nimport { css } from \"@emotion/core\";\nimport styled from \"@emotion/styled\";\n\nimport LGButton from \"@leafygreen-ui/button\";\nimport Modal from \"@leafygreen-ui/modal\";\nimport XIcon from \"@leafygreen-ui/icon/dist/X\";\nimport PlusIcon from \"@leafygreen-ui/icon/dist/Plus\";\nimport IconButton from \"@leafygreen-ui/icon-button\";\nimport TextInput from \"@leafygreen-ui/text-input\";\nimport { uiColors } from \"@leafygreen-ui/palette\";\nimport { useRealmApp } from \"../RealmApp\";\n\nfunction useTeamMembers() {\n  const [teamMembers, setTeamMembers] = React.useState(null);\n  const [newUserEmailError, setNewUserEmailError] = React.useState(null);\n  const app = useRealmApp();\n  const { addTeamMember, removeTeamMember, getMyTeamMembers } = app.currentUser.functions;\n  const updateTeamMembers = () => {\n    getMyTeamMembers().then(setTeamMembers);\n  };\n  // display team members on load\n  React.useEffect(updateTeamMembers, []);\n  return {\n    teamMembers,\n    errorMessage: newUserEmailError,\n    addTeamMember: async (email) => {\n      const { error } = await addTeamMember(email);\n      if (error) {\n        setNewUserEmailError(error);\n        return { error };\n      } else {\n        updateTeamMembers();\n      }\n    },\n    removeTeamMember: async (email) => {\n      await removeTeamMember(email);\n      updateTeamMembers();\n    },\n  };\n}\n\n\nexport default function EditPermissionsModal({\n  isEditingPermissions,\n  setIsEditingPermissions,\n}) {\n  const { teamMembers, errorMessage, addTeamMember, removeTeamMember } =\n    useTeamMembers();\n  return (\n    <Modal\n      open={isEditingPermissions}\n      setOpen={setIsEditingPermissions}\n      size=\"small\"\n    >\n      <ContentContainer>\n        <ModalHeading>Team Members</ModalHeading>\n        <ModalText>\n          These users can add, read, modify, and delete tasks in your project\n        </ModalText>\n        <ModalText>Add a new user by email:</ModalText>\n        <AddTeamMemberInput\n          addTeamMember={addTeamMember}\n          errorMessage={errorMessage}\n        />\n        <List>\n          {teamMembers?.length ? (\n            teamMembers.map((teamMember) => {\n              return (\n                <ListItem key={teamMember._id}>\n                  <TeamMemberContainer>\n                    <TeamMemberName>{teamMember.name}</TeamMemberName>\n                    <IconButton\n                      aria-label=\"remove-team-member-button\"\n                      className=\"remove-team-member-button\"\n                      onClick={async () => {\n                        await removeTeamMember(teamMember.name);\n                      }}\n                    >\n                      <XIcon />\n                    </IconButton>\n                  </TeamMemberContainer>\n                </ListItem>\n              );\n            })\n          ) : (\n            <ModalText>No team members</ModalText>\n          )}\n        </List>\n      </ContentContainer>\n    </Modal>\n  );\n}\n\nfunction AddTeamMemberInput({ addTeamMember, errorMessage }) {\n  const [inputValue, setInputValue] = React.useState(\"\");\n  return (\n    <Row>\n      <InputContainer>\n        <TextInput\n          type=\"email\"\n          aria-labelledby=\"team member email address\"\n          placeholder=\"some.email@example.com\"\n          state={errorMessage ? \"error\" : \"none\"}\n          errorMessage={errorMessage ?? \"Foo\"}\n          onChange={(e) => {\n            setInputValue(e.target.value);\n          }}\n          value={inputValue}\n        />\n      </InputContainer>\n      <Button\n        disabled={!inputValue}\n        onClick={async () => {\n          const result = await addTeamMember(inputValue);\n          if (!result?.error) {\n            setInputValue(\"\");\n          }\n        }}\n        styles={{ height: \"36px\" }}\n      >\n        <PlusIcon />\n        Add User\n      </Button>\n    </Row>\n  );\n}\n\nconst Button = styled(LGButton)`\n  height: 36px;\n`;\n\nconst Row = styled.div`\n  display: flex;\n  align-items: end;\n`;\nconst InputContainer = styled.div`\n  flex-grow: 1;\n`;\nconst ModalHeading = styled.h2`\n  margin: 0;\n  font-size: 24px;\n`;\nconst ModalText = styled.p`\n  margin: 8px 2px;\n`;\n\nconst ContentContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\nconst List = styled.ul`\n  list-style: none;\n  padding: 8px 0;\n  margin: 0;\n`;\nconst ListItem = styled.li(\n  () => css`\n    padding: 8px 12px;\n    border-radius: 8px;\n    :hover {\n      background: ${uiColors.gray.light2};\n    }\n  `\n);\nconst TeamMemberContainer = styled.div`\n  display: flex;\n  align-items: center;\n`;\nconst TeamMemberName = styled.div`\n  flex-grow: 1;\n  padding: 8px 0;\n`;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}